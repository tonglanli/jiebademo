# -*- coding: utf-8 -*-
from bottle import route,run, request, get,post,template, static_file, default_app
import jieba
import domain
#path = os.path.dirname(os.path.abspath(__file__))
#jieba.set_dictionary(path + "/jieba/dict.txt.big")
if jieba.initialized == False:
    jieba.initialize()

#import threading
#thr = threading.Thread(target=jieba.initialize)
#thr.start()
import jieba.analyse
import functools
#from nltk.probability import FreqDist
import sqlitedb
import chardet

@route('/static/:filename')
def serve_static(filename):
    return static_file(filename, root='./static')

@route('/files/:filename')
def serve_files(filename):
    return static_file(filename, root='./files')

@route('/static/temp/:filename')
def serve_temp(filename):
    tempfile = static_file(filename, root='./static/temp')
    #path = os.path.dirname(os.path.abspath(__file__))
    os.remove('static/temp/' + filename)
    return tempfile

@route('/static/js/:filename')
def serve_temp(filename):
    tempfile = static_file(filename, root='./static/js')
    return tempfile

@route('/static/css/:filename')
def serve_css(filename):
    return static_file(filename, root='./static/css')

@route('/static/design/sequenceimage/:imageName')
def serve_css(imageName):
    return static_file(imageName, root='./static/design/sequenceimage')

@route('/image/:name&:length&:keys&:values')
def serve_css(name, length, keys, values):
    from pylab import plt, mpl
    mpl.rcParams['font.sans-serif'] = ['SimHei']
    plt.xlabel(u'')
    plt.ylabel(u'')
    plt.title(u'')
    plt.grid()
    keys = keys.decode("utf-8").split(' ')
    values = values.split(' ')
    plt.xticks(range(int(length)), keys)
    plt.plot(range(int(length)), values)
    plt.xticks(rotation=defaultrotation)
    name = name + str(datetime.now()) + '.png'
    imgUrl = 'static/temp/' + name
    plt.savefig(imgUrl, bbox_inches='tight')
    plt.close()
    tempfile = static_file(name, root='./static/temp')
    os.remove(imgUrl)
    return tempfile

def match(a,b):
  if a==b:
    return "checked"
  else:
    return ""

defaulttopk=20
defaultrotation=45

@get('/')
@get('/extract')
def extract():
    sample_text='''
    金观涛，刘青峰：历史的真实性：试论数据库新方法在历史研究的应用



    一、历史研究中的“客观性”

    今日，历史学家正在面临可怕的精神分裂。一方面，历史学家的本能告诉他，勾划过去的图画必须和科学研究一样，严格客观地考订史料，去寻找真相并其进行解译，以求理解人类历史展开的模式。但另一方面，历史学家已经从19世纪客观主义的幻梦中醒过来，深知所有史料无可避免地打上了记录者主观价值的印记，更有甚者，不少人认为，以这类主观记录为素材的历史论述与讲故事没有本质的不同。可以看到，在20世纪后期，随着那些在意识形态笼罩下的大历史观纷纷解体，解构宏大历史叙事的后现代史学成为时尚。

    如果我们既不满足于愈来愈琐碎的史实考证，也不认为个人文学性的主观叙事可以替代史学，那么，我们能从这种困境中走出来吗?本文正是试图在方法论上响应这种困境，也是一种不合时宜的尝试。问题的核心是历史研究有没有客观性?如果有，它与自然科学或社会科学的客观性有什么差别?我们能否做到尽可能客观?对这些问题，我们的结论并不那么悲观。让我们先从什么是历史研究的客观性问题讲起。

    罗素(Bertrand Russell) 在<论历史>(“On History”)一文中指出：“历史学是有其价值的，首先因为它是真实的；这一点尽管不是它价值的全部，却是所有它的其它价值的基础和条件。”②在科学和社会科学研究中，追求真实是通过诉诸研究的客观性来达到的。所谓研究的客观性，通常指排除观察者或研究者的价值取向和主观观念对研究对象的影响，它在方法论上可表达为将研究对象视为不依赖观察者和研究者(主体)的独立存在这一基本原则。在社会科学中，该原则简单地称为价值中立。历史学研究也一直力图遵循这一原则。

    我们可以用兰克(Leopold von Ranke)的主张来说明这一点。为了排除主体价值取向和观念系统对史实的歪曲，兰克不相信二手史料，甚至认为过去历史著作都是不可靠的。这样，弄清历史事实真相的唯一途径就是穷本溯源，去研究“目击者”是如何记载事实的。在判定一手原始资料是否真实的过程中，兰克提出类似于清代汉学家考据的原则：愈是接近事件发生时间证人的陈述愈可靠。在兰克那里，因为可靠的史料是和研究者的观念无关的，故他反对对史实进行解释，甚至视一切历史理论(包括对重大事件因果关系的解释和社会行动的模式)为虚妄。

    长期以来，兰克的研究方法一直是史学界的金科玉律，但是史学家愈来愈感到上述客观性原则在历史研究中几乎是做不到的，或者说即使做到了亦无意义。首先，我们先排除是否可能贯彻兰克研究方法的问题，即使做到了，充其量也只是排除历史研究中研究者的主观价值，但这并不能消除历史纪录本身的主观性。历史事件的记录和自然科学的观察、社会科学的记录(它们可以做到价值中立)有一巨大差别，也即通常人只记录他认为重要和值得记录的事件，而什么是重要和值得记下来的，则往往取决于记录者的价值系统。也就是说，原始史料作为人的社会行动记录，从诉诸文字一开始就和记录者的观念不可分离。

    一方面历史事件原始记录不能排除主观价值，另一方面，在判断某一历史事件是否真实和重要时，研究者和观察者(记录者)存在着等价性。这时，即使如兰克所说排除了研究者的主观价值，也并不能达到历史研究的客观性。

    更麻烦的是，任何历史事件的记录都是单称陈述。科学哲学早就发现，对自然界孤立的、不可重复事件的单称陈述(仅对某一观察者有效)，我们很难判定它是否是真的。例如，某人曾在英国尼斯湖看到湖怪，但这只能视为一个孤立不可重复的观察记录，仅对某一观察者有效，至今科学界仍不能判断它是否真实。③历史记录中充满类似的不可靠记录。当历史学家面对大量鱼龙混杂的原始史料时，必须用某种原则来判别真伪，这就是兰克所说的用科学方法对其进行考察。所谓科学考察，是把该记录放到当时的情境中，看它和其它相关记录是否矛盾，特别是用逻辑和情理来判断该事件是否会这样发生。这样，又会引出新的问题：把历史事件的记录放到情境中去是什么意思?设身处地地想象该事件发生以及用逻辑判断其是否合理，又是什么意思?要做到这些，实际上都必须要追溯和还原支配该事件发生的观念和价值系统。

    历史事件记录和科学观察记录的最大不同在于，它们大多是有关人的行动和言论的记录；而人的行为动机又是受到观念和价值系统支配的，众人的言论和行动则受普遍观念和普遍价值影响。值得注意的是，当社会行动转化为历史记录时，支配行动的动机和观念很少被记录下来，随着日常生活的改变，这些观念可能很难被后来的研究者理解。这样，无论观念和动机对于历史上的行动者是多么难忘，但在历史事件记录中却往往发生动机和观念的缺位。

    换言之，鉴别史料是否真可靠，即判别真伪的原则，恰恰是需要回到支配该事件发生的观念和价值系统，而不是在史料中排除一切价值系统和观念。这样看来，历史研究要排除观念的影响似乎是不可能的，因为任何真实的历史记录都不可能把参与者和记录者(甚至包括研究者)的主观价值排除出去。这样一来，在历史研究中，那种常识性的用客观性来保证研究真实性的信条就崩溃了。为了达到历史研究的真实性，我们有必要重新检查科学研究的客观性原则是如何得到的，它运用到历史研究是否可能。或者说，为了保证历史研究的真实性，我们应该遵循什么样的方法论。

    二、客观性与真实性

    广义地讲，我们可以用如下受控实验原则来表达经验可靠性(真实性)的充分必要条件：“当我们控制可控变量X时(即实现条件X1、X2、X3…)，必定可以观察到Y。”显然，当我们想要Y发生，只要去实现 X，因为X为可控变量，故这总是可以做到的。也即每当X实现，我们总是看到Y发生。这里，观察的可重复性保证了Y的真实性(虽然它不能独立于观察者的选择而存在)。在受控实验中，我们通常把x称为Y的原因；而将表达X和Y之间存在着这种确定性的关系L称为因果律。

    我们可以证明，第一节所讲的用客观性(研究对象为不依赖主体的独立存在)来保证经验的真实性，只是受控实验原则的特例。④也就是说，用受控实验原则来鉴别经验的真实性，是比客观性更普遍的原则。这样一来，当研究对象和主体不可分离时，上一节所讲的用客观性方法原则上可以用受控实验原则取代。

    既然受控实验原则是比客观性原则更为有效的达到真实的方法，那么，我们能否将其运用到历史研究中，以代替兰克方法呢?表面上看，这是不可能的。因为，所有历史事件只发生一次，其特点是不可能重复性。我们认为，虽然历史事件是一次性的，不会重演，但是应该注意到历史事件是人的社会行动，它是在人的参与和控制下发生的；而人的行动又是在价值目标支配下产生做某事的动机而发生，由众多参与者的行动合成为整个社会行动，这些社会行动在某种条件下演变为历史事件。由这一认识出发，我们认为，就可以把受控实验原则引入历史研究，用于判断某社会行动是否发生以及是怎样发生的，也即可用于判断社会行动的真实性。

    把受控实验原则运用到判断历史上发生过的社会行动的真实性，是什么意思呢?这就是我们在研究历史事件的记录时，必须去寻找导致该事件发生的支配参与者行动的普遍观念。研究支配历史事件的普遍动机和思想原因，实质上是研究者在自己心中重演该事件发生的过程，这一过程很类似于对受控过程做思想试验。

    简言之，因为历史事件的核心是人的行动，人的行动受动机支配，动机又和价值系统与观念互相关联；也就是说，我们可以把分析人的行动动机和价值系统与观念如何互相作用而引致事件的发生，看作与受控实验存在着同构性。动机和与动机相联系的价值系统或相应的观念，相当于受控实验条件中的 x集(或x集中大部分元素)。因此，我们认为，受控实验判别真实性原则是可以用于历史研究的。这样，我们就可以得到如下重要定义：所谓历史事件的可重复性，并非真的是令该社会行动再发生一次，而是指后人对该事件的可理解性。

    这里所谓的可理解性，是指历史学家通过理解支配该社会行动的观念(动机)，把自己想象为当时的行动者(参与者)，根据观念如何支配动机以视社会行动如何反作用于观念，设身处地的想象整个事件过程。由此，我们得到达到历史研究真实性的第一个普遍原则，这就是：当历史记录是人的行动或社会行动时，阐明支配该社会行动发生的价值系统和观念(包括行动后果如何反作用于观念)是呈现历史事件真相的前提。我们将其称为“拟受控实验原则”。我们注意到，柯林武德(R．G．Collingwood)在谈到观念史研究的重要性时，虽然尚没有明确提到哲学高度，但他曾意识到这一点。他是这样讲的：“历史学家在自己的心灵里重演他所叙述的那些行动者的所作所为的思想与动机；而任何事件的继续却不是历史的继续，除非它所包括的行动其动机，至少原则上如此，是能够这样加以重演的。”⑤

    我们提出历史研究的“拟受控实验原则”，并用它代替原来的历史研究客观性方法，是因为任何历史研究都是研究者在思想上想象和理解(或称为模拟)曾经发生过的事件，而要达至这种理解的真实性，就必须强调应重现历史事件的参与者和记录者的观念。

    本文正是试图从历史研究方法论的高度来证明上述“拟受控实验原则”的重要意义，并结合具体案例分析来讨论这一方法的应用。我们的探索是初步的，但我们相信它是大胆、新颖、开放、充满挑战性的。

    三、阐明事件背后的观念是呈现历史真相的前提

    先举一些例子，来说明发现支配历史事件的观念是呈现真相的前提。读过中国通史的人都知道，在汉朝，每当出现日蚀、月蚀及各种天灾的时候，皇帝往往要下罪己诏，有时候还要杀大臣。东汉期问，正好是太阳黑子活动异常期，灾异特别多。当时曾制订一种历朝都没有的颇为怪异的规定：每逢发生大天灾，皇帝就会派侍中手持密令，带着十斗酒、一头牛，驾着马车到宰相家中，宣布皇帝要下令怪罪于他。然后，当皇帝的使臣上朝回复途中，宰相须上书告病。当侍中回到朝中，还没向皇帝复命时，尚书就应该把宰相自杀的消息报告皇帝。⑥在今天人们眼中，汉儒似乎丧失了理智。如果不是思想史研究揭示出汉代宇宙论儒学中独特的“天人感应”观念，并揭示支配该法令是正是天人感应观念，后人读到上述社会行动记录时，就不仅会认为其荒唐无稽，甚至会怀疑这些史料的可靠性(如果它们不是在正史中大量存在的话)。

    对过去观念的健忘，是人类和社会的本性。观念被遗忘的程度和这种观念盛行的时间离我们的远近，并没有太大关系。因此，我们认为，今天为了恢复历史记录的真实性，历史学家要做的一项关键性的工作，是寻找支配历史事件背后的观念，把历史记录还原成观念支配下发生的社会行动。不理解支配社会行动的观念和价值系统，就不能在研究者思考中理解这些社会行动是如何发生的，甚至不能判断某些记忆能否反映某一历史事件。在观念缺位条件下，即使后人尽可能详尽地阅读历史事件记录，也很难确定对它的解释是否符合真实。换言之，为了达到历史研究的真实性，除了应像科学研究和社会科学研究中尽可能排除研究者用今日观念和价值系统想象历史事件外，更重要的是去做另一件事情，这就是去认识当时支配历史事件发生的观念。这正是我们提出的拟受控实验原则。

    由于任何社会行动都不可能被完全地整体地记录下来，历史学家就只能凭这些部分的历史记录来复原该社会行动。正如柯林武德指出的那样：“从来没有一个事实被完全确定过，但它可以逐步被确定：随着历史学家工作的深入，他们愈来愈了解事实，并且愈来愈有把握去驳斥一些歪曲事实的记载；但是，从来没有一种历史陈述能够揭示一个事实的全部真相。”⑦

    也就是说，在史学研究中有一普遍接受的预设：对该社会行动发生的原始资料收集愈详尽和愈细，我们对其的认识也愈真实，也就是说凭着不完全的数据我们总是可以一步一步逼近真实的。现在，我们则可以说这一预设不一定总是对的。因为，只要当我们不了解支配历史事件发生的核心观念，以致“拟受控实验原则”不能运用时，无论在原始资料和细节上获得多大进展，逼近真实都是不可能的。换言之，历史研究中自觉地运用“拟受控实验原则”，就不仅可以理解韦伯在宗教社会学中提出的“理解方法”对历史研究的重要性，还可以得到一条判断历史学家能否找到历史真相的基本判据。

    这就是：如果不恢复事件背后的真实观念，找到的不是真实，而是“超真实”。今天人们用“超真实”这一术语，来描述那些和真实十分逼近的人工虚拟世界。虚拟世界在细节上和真实愈接近，本质上却离真实愈远，因为它造成一种幻觉，误以为找到真实，而实际上却是使人搞不清什么是真实。今天，由于观念史研究远远落后于社会史，特别是观念史和社会史的分离，以至于很多研究结果都属于“超真实”而非“真实”。

    四、观念史图像中的事件：真实性的充分必要条件

    综上所述，为了达到历史研究的真实性，研究者在处理有关人行动的原始史料时，必须恢复记录它时所缺失的观念。广义的讲，因任何历史记录的真实性都不能独立于记录者(参与者)的观念，我们必须提出一个比今日历史学家所理解的“史实”更准确、更广泛的概念，才能把握历史研究的真实性。这个新概念就是观念史图像中的事件，其定义如下：某一事件被记录(被转述或被回忆)时，离不开记录者(参与者、回忆者或转述者)特定的价值取向和观念，只有还原缺失的原有观念，对史实记录的理解才是相对完整的及可以判别真伪的。我们把历史记录中匹配了相应观念的事件，称为观念史图像中的事件。

    观念史图像中的事件可以分成两种基本类型，如果该事件记录仅仅和个人特有的观念有关，我们称之为个人的观念史图像中的事件；当它和普遍观念或普遍存在的价值系统有关，则称之为普遍观念史图像中的事件。前者只是个体观念(心灵)史的一部分，仅对个别人成立；而后者则为普遍观念演化史中的群体图像。和处理一般史实不同，对于任何观念史图像中的事件，研究者必须首先阐明事件和观念的关系，才能认识该事件的真相以及判别史料是否可靠。

    当我们去分析“观念史图像中的事件”中和事件相关的观念的关系时，存在着如下四种可能。

    第一种情况，该观念仅仅决定记录者为什么要记录该事件，这时分析观念和事件的关系只是去阐明为什么事件会被记录以及怎样被记录。

    第二种情况，寻找、恢复那些支配该事件(人的行动)的动机和决定动机的思想观念，并视之为研究的重要因素。发现这些普遍观念，就是去寻找支配该事件展开的思想方面的原因。这样，该观念史图像中的事件不仅记录了事件发生过程，还表达了该事件之所以会发生的思想原因。

    第三种情况，某些被恢复的观念，只是该事件发生后对参与者、记录者心灵的冲击下的反应。如果说第二种情况注重观念如何转化为行动，那么第三种情况则是研究事件对观念的反作用。即某事件、特别是重大事件发生后，对参与者(观察者和记录者)的心灵冲击，如何改变了他们原有的观念。

    第四种情况，是在重大事件冲击下形成的新观念对事件(行动)的再描述和定位。梁启超写《戊戌政变记》就属于这一类。历史记录和科学记录及人类学观察的一个最大不同在于，当缺乏目击者或当事人对事件的记录时，历史研究必须利用转述者的描述或流传下来的史料。而任何转述者都会根据自己的理解对事件加以详略处理，在记录中留下他所信奉的价值系统印记。流传下来的史料，大多反映了记录及流传过程中普遍观念对事件的重构，甚至该事件已成为某种普遍观念系统符号的一部分。对于这第四种情况，观念史图像中事件的诸要素，即无论事件、还是观念以及两者的关系都可能是不真实的。但是，这并不是说该观念史图像中的事件在一切条件下均为假，亦不是说该史料对历史研究无意义。

    因此，我们可以给出判别观念史图像中的事件是否为真的充份必要条件，这就是寻找和事件匹配的真实观念，并用“拟受控实验原则”判断观念和事件联系的可靠性。对于我们提到的两类观念史图像中的事件，我们暂悬置个人性的一类；先从普遍观念史图像中的事件的真实性出发展开进一步讨论。

    五、从亨佩尔覆盖定律讲起：历史展开的模式和历史记忆

    一旦理解上述判断历史陈述真实性的基本原理，我们可以开始讨论历史研究的方法论了。我们面临的第一个问题是：历史解释必须遵循什么原则?或者说，什么样的解释是符合历史真实性的，因而亦是正当的。在方法论上，解释的模式必须从真实性判别法则导出。对自然现象的科学解释只能是因果式的。所谓科学解释，实为对自然现象发生作出符合真实的解释，它一定只能是因果式的(或以因果律为基本框架)。如果解释中涉及普遍模式，我们称之为自然规律，自然定律一定是以因果律为基础的。⑧

    自19世纪到20世纪，随着科学规范向社会和人文研究之渗透，因果律能否运用到历史研究中来(即什么是一个在历史学中可以接受的解释)引起了历史学家和哲学家的普遍关注。鉴于因果解释的普遍性，相当一部分哲学家认为历史解释亦应纳入科学解释的范围。这方面具有代表性的例子是1942年亨佩尔(Carl G．Hempel)在《历史中普遍定理的功能》中提出著名的覆盖定律。他指出：在历史研究中，解释事件Y为什么发生时，通常是去追溯促使事件Y发生的另一事件C(或事件组C1、C2、c3…)，接着阐明C和Y之间联系L的普遍有效性，⑨这样才算解释了历史事件Y。这里，C相当于原因，L即为因果律，而Y则可被视为C和L带来的结果。这种对Y之所以发生的解释方法和自然科学中的因果分析完全一致。⑩

    亨佩尔覆盖定律在逻辑上似乎无懈可击，很多历史解释(特别是宏观研究和与社会科学有关的研究)运用的正是亨佩尔覆盖定律。但人文历史学家却认为这是犯了科学主义的谬误。因为历史事件大多是人在道德、价值支配下达到目的的过程；这时，目的论解释往往比因果解释更有效。而且如果历史展开过程符合普遍的因果律，这无疑意味着存在历史发展的规律，它有违于人的自由意志。直到今天，这两种意见各执一端，争论不休，历史学家无法回答历史解释是否符合因果律。问题出在什么地方呢?

    根据受控实验和经验真实性之间的关系，上述困难迎刃而解。由于历史研究中判断史料真实性的是拟受控实验原则，而并不是受控实验原则，这样，亨佩尔覆盖定律在历史学中成立的前提，也就是拟受控实验鉴别经验真实性的原则成立。因而在历史研究中，当亨佩尔覆盖定律成立时，对历史事件的所谓因果解释，大多只是自然科学(有时亦包括社会科学如经济学、人口学等)因果律的有条件运用。即如果将事件C和事件Y联系起来的法则L是普遍有效的(或统计上成立)，我们发现该法则大多是自然定律，要不就是社会科学中的统计相关性，而不是历史学本身领域中存在着因果关系。因为历史学研究人的活动，人有自由意志，人达到目的行动并不符合自然规律的必然性。只有在相当简单的例子中，观念对事件及其结果没有或很少有影响的情况下，普遍因果律才是有效的，例如C为火山爆发，Y为庞培城的毁灭。上述因果解释对历史上庞培城的毁灭提供了科学解释，但这只是自然科学法则在历史研究中的运用而已。

    我们已经证明，历史研究中鉴别真实性依靠的是拟受控实验原则，这就是把史实转化为观念史图像中的事件，并用事件的可理解性代替受控实验经验的可重复性。这样一来，当历史学家在心中重演观念和行动之间的关系，将其作为鉴别史料真伪的基本原则时，也就形成了由该鉴别真实性原则导出的历史现象正确解释之模式。换言之，既然与受控实验相对应的是因果解释，那么什么样的解释原则与拟受控实验相对应呢?它和科学因果律有什么不同，又在何种意义上和科学解释一致呢?

    如上所述，对于观念史图像中的事件，运用拟受控实验原则判则真假必须分析观念和事件之间的关系。描述观念和事件的关系可分成四类，只有第二、第三种情况才和因果律相类似。在第二种情况中讲的是作为支配社会行动动机之观念如何导致社会行动。我们记为L(1)。第三种情况是事件怎样改变观念，我们记为L(2)。对于第二种情况，拟受控实验原则中的控制变量不是事件，而是观念和价值系统x，这时L(1)不是什么因果律，而是代表观念支配下动机转化为行动之过程。⑾换言之，此时历史学作为研究人如何行动的科学，对行动的解释只能将其视为观念支配下达到目的的过程，亚里士多德的目的论似乎比因果律更自然。正因为如此，长期来历史学家才会认为因果律不适用于历史研究。在第三种情况运用拟受控实验原则，可以视为在历史学家心中推演社会行动如何影响支配该行动的普遍观念。它可以表达如下：事件Y(Y1、Y2、Y3…等)为原初观念x实行的后果，根据思想演变的内在逻辑L(2)，Y导致观念x演变为观念z。也就是说，在历史真实解释中存在着和因果律同构的L(2)，它实际上是观念在外来事件冲击下变化所遵循的逻辑。在此，我们说L(2)和因果关系L同构，是指它们均为变量X和Y之间的恒定关系。但因果律L中原因项(可控变量)和结果项均为事件，而L(2)中相当于原因项为事件和原初观念，结果项则为观念，它代表了事件发生时观念变化遵循的逻辑。据此，我们得到一个重要推论，这就是如果历史解释中存在着独特的(类似于自然科学中的)因果法则，它不是亨佩尔覆盖定律，而是观念史图像中的事件对观念的反作用。我们称之为历史解释中独特的“因果律”。

    这样一来，我们可以得到一个重要结论：历史事件展开的模式，是观念转化为行动、行动再反作用于原先支配行动的互为因果过程。⑿

    综上所述，如果用观念史图像中的事件来表达历史展开之真实过程，它实为观念转化为行动以及行动反作用于观念(展开原有观念或产生新观念)的互动。对个人如此，群体亦如此。历史记忆本质上是对这种互动过程(整体和片断)的记录。一方面，人在某种观念(价值系统)支配下参与或记录社会行动，形成历史记忆；凡是成为某种普遍公共历史记忆的，必定是和某一人群(国家、民族、族群)共同经历的相关事件，特别是人们在普遍观念支配下参与的事件。另一方面，人的行动特别是社会行动一旦发生，会反过来改变(或强化)人们参与该行动时初始观念；当某一重大事件成为某一群体刻骨铭心难以忘怀的过去时，该记忆常常会导致人们原有价值系统的重塑形成新的普遍观念，从而影响到下一步的社会行动。也就是说，构成真实历史记忆核心的是由观念转化为社会行动，社会行动的结果反过来改变或强化某种观念的互为因果链(我们下面简称为互动链)。必须注意，通常历史记忆还包括用现在(或历史记忆定形时)的观念系统对以前发生事件的重构，它往往是对真实互动链的歪曲。故历史记忆不一定是真实的。很多时候，意识型态和价值系统对过去的重塑、对某些事件的夸大和对另一些事件有意忽略、甚至虚构和神话都是历史记忆的组成部分。

    六、观念史研究和数据库方法

    基于上述讨论，我们可以对本文一开始提出的方法论问题作出回答，它包括历史研究的目的、自然科学(社会科学)方法可以在何种程度上运用到历史研究中以及是否存在历史演变的长程结构(有无类似于自然规律的普遍模式)等三个方面。

    首先，历史研究既然以追求认识历史的真实为目的，它必然和文学叙事有着根本的不同，反而与科学求真存在着某种相似性。科学研究以发现新的事实和未知因果关系为目的，鉴别新事实(经验)和新因果律的核心方法是受控实验。而历史学家首先做的也是去发现新的史实，并对其真实性进行考订，但他们只能运用拟受控实验来判别过去事情的真实性；因此在思想史和观念史研究中，那些复原过去世界图画并鉴别史实工作，就如考古学一样重要。

    同样，与通过科学研究发现未知的因果关系类似，历史研究亦以揭示观念史图像中的事件中关系 L(1)和L(2)为己任，这就是对历史进行解释。它存在两个不同的方面。因L(1)是观念支配社会行动或意识形态目的付之实践的过程，历史学家对该过程的研究主要不是新事实之发现，而是和人类遗忘作斗争，将过去的思想以及价值支配下社会行动疏理清楚并作出尽可能符合历史真实的解说。这既是对人类以往社会行动和思考经验的整理，亦是对重大历史教训之吸取，使其永远不会被遗忘；并在此基于上对过去进行反思。当然，这正是历史研究和科学研究的最大区别。

    然而，一旦历史研究涉及社会行动对观念系统的反作用L(2)，其意义和揭示L(1)有极大差别，反和科学相当接近了。因L(2)是历史解释中独特的“因果”律，对它进行探讨和科学研究中发现新的因果关系类似。在事件对观念反作用研究中，虽涉及事件，但揭示L(2)主要属于思想史和观念史领域。⒀它包括观念的起源和观念的演化以及观念和普遍动机关系之研究，如果说L(1)是研究历史事件如何发生，那么 L(2)是探讨历史事件为什么发生即历史之所以然。在科学研究中，具体的因果关系可以上升为普遍因果律，并从中发现自然定律。而在历史领域只有对历史解释中独特的“因果律”即L(2)的探讨中才存在类似的过程。也就是说，如果想在历史研究中发现解释历史普遍有效的法则(它必须是历史学独有而非自然法则和经济学法则)，它只可能存在观念史或思想演变的逻辑中，即属于哲学和观念史(思想史)交叉领域。这也是至今历史学家相对忽略的领域。

    因为L(1)是人在价值支配下达到目的之过程，而L(2)为事件对观念的反作用，两者耦合虽和互为因果关系网同构，但性质却有本质不同，它包含人在试错中的学习和进步和对价值、社会行动之自觉。哲学家早就意识到该差别。19世纪黑格尔写《历史哲学》，认为进步只在在于历史展开过程中。20世纪上半叶柯林武德强调“一切历史都是思想的历史”，注重的都是这一点。

    综上所述，我们认为，在历史研究中，是可以探究历史发生发展的模式的，其核心是揭示事件(或事件群)与观念互动链的结构，这是历史解释的核心。否则历史研究将变得支离破碎，丧失它作为人类对思想、价值系统实践进行研究、认识其模式和反思其盲目性的功能。

    但是，至今为止，有关历史展开的整体模式和结构之研究，大多还停留在哲学和观念史的思辨。无论是黑格尔的历史哲学，还是依照柯林武德的观念史，都没有做到将经验研究和思想分析、验证结合起来。而历史学不同于哲学，它必须以收集、鉴别、分析原始史科为基础，故历史展开模式和结构研究至今不被历史学家看重。因此，今日之历史领域，在大历史观和史料之间存在着一条似乎难以逾越的鸿沟。即使人们意识到大历史观的意义，它大多仍局限于空谈和想象，很难变成一种可以用史实检验的探索，因而被专业越分愈细的历史学研究忽略甚至抛弃。而在鸿沟另一边，史实研究因缺乏理论意义开始丧失历史解释的功能。

    我们能跨越这条鸿沟么?无论是探究历史展开的模式、还是观念与社会互动的结构，将理论分析与经验研究结合的关键，是用史实来展开观念与社会互动之长链并检验其中各环节。观念与社会互动长链由L(1)和L(2)耦合而成，对L(1)的经验研究中，最难的是找到支配社会行动的真实观念。而事件对观念的反作用研究，困难的亦是观念变化的轨迹。因为事件Y(Y1、Y2、Y3…等)为原初观念X实行的后果，当X清楚时，Y的研究相对容易，但检验“根据思想演变的内在逻辑L(2)，Y导致观念X演变为观念Z”则相当困难。然而，自20世纪哲学研究实现了语言学转向后，语言学和哲学的交汇产生了十分重要的成果。其中有一个基本观点成为学术界普遍共识，这就是当某一种普遍观念在历史上存在过并转化为社会行动时，我们一定可以找到语言学的证据，因为任何观念的表达、流传(成为社会化的普遍观念)都离不开语言。无论是普遍观念转化为社会行动，还是社会行动反过来改变普遍观念，都可以通过表达有关观念的关键词的意义分析和使用频度统计来证实。

    虽然有了这种共识，但是跨越这条鸿沟仍是困难重重。障碍主要来自如下两方面：第一，由于语言学要求的是比历史学史料更大量、更具体、更可靠的证据，甚至是统计结果的证明，而以往历史研究中，学者只凭个人之力来搜集、研究分析史料，对一个观点的论证使用数条或数十条史料就可以了；但如果要找到语言学证据，则往要用数百条，甚至成千上万条例证，才能做出较可靠的分析，这就大大超出了一两个人的记忆和分析能力的限度。第二，由于思想的传播和演变往往不是由单一语种就可以分析得到的，如西方思想史就涉及多种语言；那么，我们可以选择哪一种语言，又选取什么时段作为研究范围，使得研究有更可靠的结果，就十分重要了?我们发现，中国近现代思想史的研究，为跨越这条鸿沟提供了可能性。

    十几年前，我们就选择了中国近现代史特别是中国思想由传统转变为现代形态作为研究对象。我们之所以认为在该领域中存在跨越鸿沟的可能，是因为上面所说的两个困难最容易在这一领域克服。首先，与中国社会的现代转型有关的普遍观念和社会行动的互动链，涉及时段不长，集中在1830―1930年代这一百年间；所涉语种主要是中文文献。从原则上来讲，这一百年相关文献是可以穷尽的。更重要的是，自1990年代中期之后，随着大量历史和思想史文献电子文本的出现，使研究者有可能建立某种专业数据库，从而使得通过关键词统计分析来寻找历史上存在的普遍观念出现及其变迁是可以实行的，研究者可以用数据库方法对思想史假说(观念变迁以及历史研究中特有的“因果律”)进行经验检验。因此，我们可以说，今天中国近现代史(特别是观念史)研究，正在成为孕育和探索历史研究新范式的最佳场所。

    自从1997年开始，我们通过一系列大型研究计划支持，开始建立研究1830至1930年间中国政治思想变迁的专业数据库。该库从两千万字文献起步，逐步增加到一亿多字。⒁虽然，这个数量级仍是不够的，但已大大超出了个体研究者所能掌握文献的限度。十年来，我们一直在利用数据库通过关键词统计分析，研究中国近现代最重要的十组政治观念的起源、传播和普及。我们体会到运用数据库的研究已存在着以往史学研究没有的两个特点。

    第一，和一般思想史研究不同，以往的思想史研究是以思想流派、代表人物的著作、言论为中心，而我们的研究是以某一时段相关文献中的含有表达某一观念的关键词例句为中心。也就是说，不再以流派、人物、著作为分析单元，而以例句为基本单元。以往的思想史研究中，针对某一流派、人物的思想，不同的研究者往往有不同的解读，众说纷纭；而以例句为中心，对某一词汇在一个句子中的意义，研究者是可以达到共识的。也就是，不同的研究者在分析同一个例句，并结合上下文阅读，对该词的意义会得出大致相同的答案。这就带来一个以往研究中无法想象的结果，这就是观念史研究变得可以验证了，这是以往思想史和观念史方法不能做到的。

    具体分析步骤是，首先找出指涉某一观念(或事件)的关键词，它可以是一个或一组；⒂接着利用数据库找出含有该词(或词组)的所有例句，及其按年代的使用次数统计。原则上讲，对于计算机的处理能力来说，某一时代所有原始文献是可以穷尽的，一般情况下，处理的历史文献越多、越全面，越能够得到更符合真实的结果。在此基础上，再对提出的所有例句进行意义分析，注重关键词的不同意义类型及这些不同意义在不同年代使用时的变化情况，统计不同意义类型在不同年代使用次数的变化，为观念在流传中的意义变化找语言学证据。最后，用上述经过分析的例句为基本素材，寻找支配事件发生的真实观念。从以上步骤可以看到，该方法的有效性，是建立在其处理文献量大和可以验证这两点之上的。尽管计算机数据库在这一步中发挥了极大的作用，但它仍然只是辅助性的。从选关键词开始，到以后每一步中，研究者的分析都起着主导作用。由于这一方法要求研究者去分析成千上万个例句，如同科学实验室分析大量数据一样，研究者在这一环节的工作甚为枯燥和艰辛，但又是不得不做的基础性数据处理工作。

    第二，在完成大量数据处理后和分析后，我们把研究的重点放到观念史图像中的事件对观念问的互动分析上来，即L(2)上，去发现观念在外来冲击下变化所遵循的逻辑；一旦做到这一点，L(1)和L(2)怎样耦合就可以用经验证明。我们可以整体地抓住普遍观念转化为社会行动、社会行动又如何改变(反作用于)普遍观念的互动链。这样的分析是整合断裂碎片化的经验研究，以便去寻找互动链的结构和模式。下面，我们用具体案例来说明数据库方法对发现互动链的重要性。

    七、寻找观念与事件之间的互动链

    疏理观念和社会互动链第一步也是最容易被忽略的一步，是对支配重大历史事件发生的普遍观念进行准确的定位。只有完成这一定位，才能理解该事件对普遍事件的反作用，使真实的观念和社会互动链呈现出来。我们就以辛亥革命为例，说明这一定位对疏理观念和社会互动链的重要性，以及如何利用数据库方法来做出这种定位。

    众所周知，发生于1911年的辛亥革命，是影响中国20世纪历史走向的最重大事件之一，它导致清王朝覆灭，结束了两千多年的帝制，建立了亚洲第一个共和国，即中华民国。那么，如何为支配这一重大事件发生的普遍观念定位呢?表面上看，支配辛亥革命的思想，无疑是革命观念的普及了。这类看法是早已写入历史教科书的定论，例如，把清王朝终结的历史看成是清末革命派对维新派和保皇派的胜利。但是如果从我们提出的“观念史图像中的事件”角度来看，对于当时参与这一事件的大多数人，这样为这一重大事件定位是不是符合真实呢?我们通过数据库方法对主导“辛亥革命”观念进行分析后，发现这一定论大可怀疑。

    从事件发生的经过来看，辛亥革命直接起因是铁路风潮，它本只是一个地方反对中央的经济事件。1911年盛宣怀继唐绍仪成为邮传部尚书后，3月5日他与日本正金银行订立铁路公债借款一千万日元，4月份载泽与四国银行团订立整顿币制、兴办实业、推广铁路计划，借款五千万元，用国有铁路作为抵押。这样，5月5日给事中石长信疏陈商办铁路弊害，主张铁路干线国有，支路民营。5月8日奕勖的新内阁成立，盛宣怀作为邮传部长，决定执行干线国有政策。5月9日皇帝上谕宣布，各省所有商办铁路由国家收回。

    这一政策牵连最大的是四川和广东两个省。因为1904年四川总督锡良奏请清廷批准绅商自行筹资修建成都到宜昌铁路，当时绅士按占田多少强迫认购铁路租股，即凡有一亩田能收租的全是股东。⒃现在中央政府决定铁路干线国有，直接损害绅士利益，于是出现省咨议局与国家的对抗。四川绅士派出代表到北京，跪在地安门口，要求与摄政王对话，但是中央政府态度很强硬，将代表解回原籍。这时，四川绅士酝酿独立。于是中央政府派端方率湖北的新军人川镇压。湖北新军有第八镇和第十一混成协，共一万七千人。1911年8、9月间，调动九千新军入川，留守武汉的约八千人，其中半数与革命党有联系。这就为武昌起义提供了机会。农历八月九日(10月10日)，武昌起义爆发。

    起义军对外声明，毫无排外之意，主张以往条约仍然有效，将中国建立成一个共和国；这样，各国领使先后宣告中立。在起义二十天后，湖南、陕西独立，接着九江独立，广州将军凤山被刺，山西独立、云南独立、江西独立……整个南方相继独立。特别值得注意的是，发起独立的是各省的咨议局。

    从以上过程来看，从事件的引发，到成功推翻清王朝整个过程中，地方绅士起了关键作用。因此，早在1960年代，就有学者指出，辛亥革命实为立宪派社会行动的逻辑延伸，忽略立宪派的主流观念，是不可能真正认清辛亥革命原因的。⒄而立宪派一直是反对革命的，因此，支配辛亥革命发生的主流观念系统，似乎不应该是革命观念。

    但是问题的复杂性在于，武昌起义的爆发，肯定和革命党组织对新军渗透有极大关系，而排满革命一直是革命党所主张。而且一些历史学家强调咨议局之所以独立，是因为1910年后广大绅士开始倾向革命，故将其归为革命观念的传播所致亦不无道理。为了判断主导辛亥革命这一观念史图像中的事件背后的普遍观念是否是革命，我们必须引进词语判据。因为任何普遍观念的流传都离不开语言，如果辛亥革命真是以革命观念为背景的事件，绅士立宪派转向接受了革命观念，那么，应该可以从统计上发现当时的文献中鼓吹革命观念、使用“革命”一词的次数大大增加。

    但我们查询“数据库”1890―1911年“革命”一词的使用次数发现，19111年恰恰是“革命”一词使用的最低谷。这一语言现象，与1910年和1911年间正好是革命党活动的低潮这一历史现象相吻合。⒅将两者结合起来，可以说将辛亥革命的发生归为革命思潮的支配，并没有很强的说服力。即辛亥革命作为观念史图像中的事件，支配其发生和展开的，主要不是革命而是别的观念。

    那么，“辛亥革命”的命名又是如何作出的呢?数据库检索表明，这个提法最早出现在1912年梁启超(罪言)一文中，他这样写道：“辛亥革命之役，易数千年之帝制以共和。”⒆在这个句子中，梁启超第一次使用了“辛亥革命”词组，该句子的准确意义是指推翻数千年帝制、建立共和；“之役”是指武昌首义之役，也即1911年10月10日那天武昌革命军起义及随后的战事。我们在前面已简述这一事件发生过程，它是由绅士的护路运动并利用省议会表达政治诉求，进而要求独立，清廷调兵镇压四川可能发生的民变，武昌空虚，革命军才能发动起义；首义发生后，主要不是通过战争而是各省宣告独立而导致清廷垮台。也就是说，事件的前因后果都是绅士政治力量起着主要作用，如此，我们就应该找出支配当时绅士的观念，才能为支配辛亥革命发生的观念定位。当时支配立宪派绅士观念的是共和主义，因此，我们说支配辛亥革命的观念是当时占社会主流的共和主义观念。

    据此，我们把推动辛亥革命背后的主流观念定为共和主义，它是中西二分二元论意识形态展开的产物。所谓二元论意识形态是指，为了维护清朝统治和绅士参与改革的合法性，清廷和广大绅士将公共领域和家族领域分开，认为两个领域之理互不相干。这样可以在公领域引入西政西学，而在私领域维护儒家三纲五常的正统；其结果是广大绅士阶层积极投身于新政改革和预备立宪，革命观念传播受到遏制。绅士阶层利用各级咨议局聚集政治力量，发起一次次召开国会运动，要求成为立宪主体。绅士阶层的这些行动与革命无关，是合法政治斗争。因此，可以说引发辛亥革命的正是由中西二分的意识形态价值系统导出的共和主义。

    用共和主义而不是革命观念来看1911年的辛亥革命，最关键的是如何解释绅士及其政治势力对清廷的反叛。我们曾分析指出，在中西二分二元论意识形态中，儒家伦理仅在家族家庭等私领域有效，这样，就不能由“孝”推出“忠”；皇帝统治正当性只是基于习惯的权威。⒇。王权的意识形态正当性在公共领域中大打折扣之后，一旦中央与地方发生利益冲突，君主立宪目标就自然被以绅士地方精英为主导的共和主义取代。辛亥革命实为清末省咨议局的绅士积极要求召开国会，发起一次次挑战清王朝的行动的逻辑延伸。也就是说立宪派并不需要接受“革命”观念，就可以支持颠覆中央王权的行动。一旦找到支配辛亥革命发生的主流真实观念，一条连续的观念和社会事件的互动链便显现出来。

    如果把支配辛亥革命发生的主流观念视为革命，就很难发现该事件和之前和之后事件问的联系，辛亥革命的发生意味着历史的断裂。而将支配辛亥革命发生的真实观念，还原为中西二分二元论意识形态背景下广大绅士接受共和主义，就会很清晰地看到辛亥革命之前和民初重大事件之间的一致性。辛亥革命是立宪运动的逻辑延伸。而民初的共和政治亦是中西二分二元论意识形态付之实践，这样清廷的立宪和民初的共和联成一整体，它们都是中西二分二元论意识形态支配下的社会行动。正因为如此，一旦共和尝试失败，二元论意识形态就要对民初政治的无序负起责任，人们就会质疑并进而否定中西二分二元论意识形态以及作为其载体的绅士阶层，这正是新文化运动爆发的思想原因。

    总之，通过数据库方法我们发现如下互动链：中西二分二元论意识形态付之实现，导致清廷预备立宪和辛亥革命，该普遍观念实现的后果是建立民国及民初政治的失秩；人们对这一后果的反思，引发了新文化运动，结果是用新的观念取代中西二分二元论意识形态。这样，就把断裂的历史解释整合为一整体。在该互动链中，L(2)为共和失败引发观念系统的巨变，这正是我们说的某种普遍观念实行带来的后果对观念的反作用。在新文化运动爆发以及孕育新观念的逻辑中，存在着我们在前面所讲的历史领域中独特的“因果律”。

    八、“客观性”的新理解：超越不同的互动链

    在辛亥革命的案例中，可以找到支配事件发生的主导观念。对有些事件，它涉及持不同观念的参与群体，在不同参与群体所持的观念中，不存在一个主导观念。事件发生后，不同的群体对同一事件的记录、解读和反应也大不相同。这时，必须疏理出多条普遍观念与社会行动的互动链，才能把握住历史展开之整体。

    1894年中日大战的爆发就是典型例子。众所周知，甲午中日战争，是由于中国和日本同时武装介入朝鲜东学党之乱政治危机而引发的。它对中国思想产生了巨大的影响，开启了中国的转型时代。其实，它对日本和朝鲜近代思想的冲击同样巨大，无非支配中、日、韩三国参战的普遍观念不同，战争结果对观念的反作用亦不同罢了。也就是说，将甲午战争和观念匹配，实为三个观念史图像中的事件。在中日韩三国不同观念系统中，对其发生的原因，发生后三个系统对事件的记录、反应、解读，都遵循各自的逻辑展开，故存在三种不同的互动链。它们同样都代表真实的历史进程和记忆。

    以中国为主体寻找互动链，第一步是寻找支配中国参与该事件的真实观念(价值系统)。朝鲜历来是中国藩属，中韩关系一直被界定为天下秩序中的朝贡关系。1894年春，朝鲜东学党攻陷全州，当时代表大清驻守朝鲜的袁世凯向北洋大臣建议说：“其内乱不能自了，求华代戡，自为上国体面，未便固却”；而韩廷也发政府正式照会说，“查壬午、甲申敝邦两次内乱，咸赖中朝兵士代为戡定”，再次请求清廷派兵“速来代戡”。[21]到该年六月，当中日两国都出兵朝鲜时，东学党之乱已基本平定。日本为了留驻朝鲜，提出有关朝鲜属邦关系和内政改革的甲、乙两案，逼韩廷表态。这时李鸿章出于不能让韩廷否认宗属关系的考虑，给袁世凯发电讯稿说：“韩属华已千余年，各国皆知”，“如畏倭，竟认非华属，擅立文据，华必兴师问罪”。[22]由此可见，中国出兵朝鲜是以宗主国抚绥藩属惯例，维护天下秩序。

    那么，我们是否能据此将促使中国卷入甲午战争的普遍观念界定为传统的天下观呢?事情不那么简单。郭廷以早就发现，自同治中兴起，清廷朝野对国际关系的认识已发生了重大变化。[23]无论是1870年代左宗棠征新疆，还是1880年代的中法战争中国将领的积极进取，都表明1860―1895年间清廷的外交政策已不能简单地用传统的天下观解释。1882年后以后，袁世凯在朝鲜俨如总理大臣、对朝鲜内政全方位的干预，已超出传统天下观规定的宗藩关系。我们利用数据库关键词统计分析指出：准确地讲，在自强运动时期，支配清廷和儒臣的普遍观念，已不再是传统天下观，而是一种以中国为中心的万国观。

    所谓以中国为中心的万国观，是指将经世致用精神注入传统天下观，以克服传统天下观的闭关自守，形成了既维护传统宗藩关系，又运用国际法与西方打交道的更积极有为外交政策。就把中国视为世界中心和对朝贡关系的维护而言，万国观和传统天下观相同：中国仍是万国之中心。因为万国观的核心价值仍是儒家伦理，朝鲜作为中国的周边藩属国家，清廷仍以传统天下秩序来界定其地位，这样，袁世凯处理朝鲜事务，从整体上来说是按天下观的宗藩原则。但是，按宗藩原则，不能过度干预藩国内政，而在朝鲜问题上，袁之所以不受限制，乃是出于万国观积极有为心态。

    今天，我们在看当时人反省和追究为甲午战败责任的文献时，除了我们熟知的对清廷无能的指责外，还有另一些过去较少提及的，这就是有不少人把战争爆发归咎于中国过份干预朝鲜内政。例如，张佩纶就认为袁世凯是诱发战争的“罪魁祸首”，他责斥说：“虽日中朝，而一味铺张苛刻。视朝鲜如奴，并视日本如蚁，怨毒巳深，冥然罔觉。”[24]

    一旦找到支配中国参与战争的观念，甲午战争就可以和洋务运动联系起来。洋务作为中国传统社会国防现代化的努力，其指导思想也是儒学的经世致用。中国意识到为了保护自己和东亚天下秩序不受冲击，对朝鲜的干预就必须比传统天下观更为积极主动。也就是说，中法战争、左宗棠平定新强，与1880至1890年代袁世凯驻朝期间对韩政的全面干预，这些发生时间和地点不同的事件，存在着高度的一致性。正因为基于以中国为中心的万国观的领土意识和武装捍卫东亚残存的朝贡秩序同时成立，推行自强运动的中国，必然会与企图向大陆扩张的日本发生激烈冲突，中日之战是不可避免的。

    如果以日本为主体，处理该观念史图像中的事件，得到的是另一条互动链。日本称甲午战争为日清战争。它在日本人的历史记忆中，远不如在中国具有传统和现代分水岭的性质，而只是明冶维新后在琉球建新藩、进军台湾、征韩以及日俄战争等民族国家扩张过程中的一环。其支配思想可以称为日本特有的民族主义。什么是日本特有的民族主义?担任这场战争外交指导的陆奥宗光在1895年出版《蹇蹇录》一书中说，战争是由“西欧之新文明与东亚之旧文明间之冲突”引起的。在中日交战之时，思想家内村鉴三就写了(征诸世界历史论日、支关系)一文，称日中两国是“代表新文明之小国”与“代表旧文明之大国”的关系，日本军事侵略行动被说成是“义战”。[25]明治维新后的日本，把中国和韩国视为落后和甚至征服的对象。l885年福泽谕吉的《脱亚论》中，就有“我乃于心中谢绝亚细亚恶友者也”的名言；[26]所谓的亚细亚之恶友，“然今所不幸者，近邻有国，一日支那，一日朝鲜”；他深恐“以西洋文明眼光看来，由于三国地理相接，或将日本视若同类国家，而有意以对中朝之评价来教训我日本”。[27]

    早在明治初年，日本就提出“征韩”观念。征韩是由“神功皇后征伐三韩的传统与儒教中的华夷思想的传统混合而成”；又加以现代包装，说成是“虽言征伐，亦非胡乱征之，欲遵世界之公理”。[28]因此，支配日本征韩和挑起1894年中日战争的普遍观念存在高度同一性，即来自日本近代思想变构的日本东亚(或皿洲)主义。一方面，日本以新文明自居。但它和当时西方以新文明自居的帝国主义不同，日本在建立民族国家的对外扩张中，并不如西方帝国主义那样注重国际法。另一方面，当日本面对西方时，日本会以最先进的东方、黄种人的代表自居，强调亚洲价值和西方对抗。这时，日本就成为东方的中心，突出东洋与西洋的分野，形成19世纪后半叶日本的“亚洲主义”，要“建立一个经济、政治与文化上同质的亚洲。”[29]从明治末年到大正初年，“日本国的天职”、“新日本的使命”成为日本政治精英的口头禅。它们作为日本特有的民族主义，是支配1870年代征韩至1894年与中国交战及一系列扩张行为的主流观念。

    对于19世纪后半叶的朝鲜，甲午中日战争这一观念史图像中的事件，又对应着什么样的观念呢?表面上看，朝鲜摇摆在接受中国的天下观和承认国际法条约关系之间，其结果是把战火引到自己国土并沦陷为日本殖民地。右议政朴寿的态度十分典型，他一方面批判“藩国无外交”，主张摆脱中国的天下一家，积极与西方国家缔结外交关系；另一方面，又指日本有征韩论想入侵朝鲜，主张以朝鲜是中国的“属邦”名义来阻止日本侵略。朝鲜之所以可以对中国天下观采取这种工具性的实用主义态度，是有其思想背景的。

    早在明代，朝鲜已接受儒学，承认中国为天下中心，自称小华。但自清兵入关，朝鲜士大夫认为中国已亡，视满清统治为夷狄，中国当然亦不再是天下的中心。而朝鲜因继承并维护了儒学正宗，符合儒学道德秩序的天道，自然是天下的中心。在这样的思想史脉络中，当面临全球化冲击，又夹在中国与日本之间时，以朝鲜为道德秩序中心的观念视野下，无论国际条约还是对中国的朝贡都不具道德意义，二者都是争取朝鲜独立可利用的工具。我们称之为朝鲜独特的天下观。

    当时，朝鲜开化党主张学日本，保守派却接受朝贡秩序，表面上看，两者背后似乎不存在统一的普遍观念。其实，韩国的两派都是以本国政治为出发点，处理与中国和日本关系时，主导思想都是工具性的，即都是朝鲜独特的天下观。在1880年代，韩国高宗为摆脱变质的朝贡体制和袁世凯的内政干涉，一直苦苦地促进自主独立外交，于是特别注重和日本及其它国家签订条约。朝鲜政府于1881年派遗六十二名官员赴日两个月考察日本；回国后，其中十二人出任政府要职，推进朝鲜近代化。[30]1884年甲申政变的主导人物，发动打倒“亲清派”的政变时，其政纲第一条就是“废止对中国的事大礼仪”。[31]另一方面，一旦争取独立过程中面临日本入侵危险时，另一派会立即根据朝贡关系用中国遏制日本。

    该观念导致朝鲜在中国和日本冲突中扮演着举足轻重的角色。早在1876年，日本借其船只在江华岛被袭击事件，强迫朝鲜签订《江华条约》。该条约试图以承认朝鲜为自主之国，来否定中国的宗主权。条约对朝鲜而言，其中有争取独立自主的意义。李鸿章为了牵制日本，一方要求朝鲜自行公开声明为中国属邦，另一方面又介绍美、英、德等与朝鲜订约；他以为这样就可以令中韩的宗藩关系得到国际承认。[32]

    1885年，日本派伊藤博文与李鸿章订定了《天津条约》，约中规定，朝鲜一旦发生变乱，双方在行文知照之后，均可出兵朝鲜，埋下了中日在朝鲜军事冲突的导火线。[33]1894年发生东学党之乱时，日本就是根据《天津条约》向朝鲜出兵的。这时，对日本侵占朝鲜心怀戒惧的韩廷，自然反过来根据朝贡关系要求清国代为戡乱。这一连串事件和观念互动的展开，决定了以中国为中心的万国观和日本民族主义必定在朝鲜半岛发生军事冲突。正如一位韩国学者指出的：“作为出兵理由的、出于朝贡体制的‘上国一属邦’观念，在近代公法体制支配的国际社会中，并不能确保其正当性，由此招来了日本出兵的国际事件。在近代，没能自己克服前近代朝贡体制的朝鲜，惹起了作为邻居的朝贡体制的代表势力和作为条约体制的代表势力的冲突，只能自食其果。”[34]这一分析，一语道破朝鲜引火烧身在某种意义上是其所持独特观念的结果。

    在1894年的事件中，由于支配三方参与的理据不一样，战争后果在中、日、韩三国引发的反应也大不相同。对于日本而言，“日清战争”这一观念史图像中的事件和普遍观念的互动，反过来强化了日本特有的民族主义，增强了其向东北亚扩张的信心。这就导致20世纪头几年的日俄战争。而日本打败俄国，又刺激日本20世纪上半叶在对外扩张道路上愈走愈远，最后发展到在建立所谓“大东亚共荣圈”名义下，发动侵华和太平洋战争。

    再看朝鲜。甲午战争后，朝鲜沦为日本殖民地，但是，朝鲜并没有因此而放弃争取民族独立和现代化的目标。为了对抗日本，我们前面分析过的韩国以儒学正统自居的优越性，非但没有被质疑，反而成为韩国民族认同的符号之一。

    中国的情况与日本、朝鲜都不同。甲午战败后，李鸿章赴日签订丧权辱国的马关条约时，曾对伊藤博文说：“由于此次战争，中国侥幸得以从长夜之迷梦中觉醒”。[35]他说的所谓中国从长夜迷梦中觉醒，这个“长夜”和“迷梦”，是指中国两千年来基本行之有效的儒家社会组织蓝图；而现在看来是非变不可了。思想史家张灏把甲午战败定位为中国转型时代的开始，引发了中国社会、思想和文化由传统向现代的全面转型。[36]

    前面我们指出，以中国为中心的万国观是支配中国介入朝鲜并与日本发生军事冲突的主要观念，为什么甲午战败的事件反作用万国观，会对中国造成如此巨大的影响呢?以中国为中心的万国观有两个前提，一是认为世界是由不同道德水平的国家组成；二是中国儒家伦理在道德上优于世界万国。根据思想史内在逻辑，甲午战败使中国意识到自己不再是万国的中心，这就会导致对儒家伦理优越性的质疑。正因为中国不再是万国中心，对外开放、引进西方制度，就成为天经地义。中国维新思潮澎湃，由此引发了1898年的戊戌维新。

    综上所述，找到支配中国卷入甲午战争的真实观念，使我们可以发现一条普遍观念和社会的互动链，把甲午前和甲午后重大观念史图像中的事件联成一个整体。太平天国大动乱和鸦片战争对儒学的反作用是经世致用的兴起，中国传统天下观变为以中国为中心的万国观。甲午战败宣告了万国观、也即自强运动的失败，其思想意义在于证明了在民族国家竞争的现代化潮流中，儒家伦理是不可欲的。甲午后，中国出现了势不可挡的变法潮流，从此，中国进入了大变动的20世纪。

    现在，我们对前面的讨论作一鸟瞰。一开始我们指出，学术研究的真实性通常是用客观性原则来保证的，即视研究对象和主体的观念系统无关以及尽可能做到价值中立。由于“客观性”原则对历史研究无意义，故应该用拟受控实验的“真实性”取代“客观性”。接着我们证明，在历史研究中用拟受控实验的“真实性”原则，相当于去寻找支配该事件发生的真实观念。为此，我们提出用观念史图像中的事件代替史实，以便将事件和与其相联的观念进行定位。

    也就是说，为了达到历史研究的真实性，并不是去排除历史记录中的主观性(将对象视为如同物那样的存在)就可以做到的，而是去寻找支配该事件发生的真实观念，并进一步分析该事件发生后又对该群体的观念产生了什么样的冲击，即它是如何改变支配该事件发生的普遍观念。由于改变了的观念系统通常又会影响人做出新的社会行动；新社会行动作为观念图像中的事件，又会对刚形成的观念系统结构产生冲击，如此循环往复以形成一条互动链。

    进而我们又指出，即使在同一事件中，对具有不同观念系统的不同参与群体，往往形成若干不同的互动链。它们都是历史真实的一部分。这样，为了寻找历史真实，我们不仅要研究涉及同一事件参与者的不同记录和表述，还必须分析不同参与者的普遍观念与社会互动形成的不同互动链。研究者可以从一条互动链走向多条互动链，一方面意味着比较研究方法的运用和成熟，另一方面亦是一种超越的历史视野的形成。读者或许已发现，从自身深陷在其中的单一互动链中跳出，在某种意义上正是排除自己所处的观念系统对研究对象的笼罩而达到价值中立。我们又回到客观性和价值中立原则上来了。这表明，并不是说价值中立和“客观性”原则对历史研究和建立正确的历史记忆没有意义，而只是应从全新的角度来对其进行定位。准确地讲，历史研究的“客观性”并不是排除历史事件背后的观念，而是通过寻找支配其发生的真实观念以达到可以超越该观念，使其转化为反思的历史意识。[37]

    同样所谓“价值中立”原则也并不是我们在评价历史时超越一切价值取向(这是不可能的)，而是把自己坚持的价值放到不同互动链相应的多种价值系统中，使我们信奉的价值系统成为一种可以对比的并且具有反思自己能力的存在。观念史图像中的事件多元的真实性使我们在任何时候都不会盲目地深陷在一种价值系统中不能自拔。

    综观对历史研究客观性原则的重新定位，其本质是在研究对象和主体的观念系统不可分离时，研究者如何保证经验的可靠性(真实性)，并在真实性前提下达到研究对象和研究者所信奉的价值系统、所持的观念最大限度的分离，正是依靠这种分离，实现对特定价值系统的超越和走出特定观念系统的束缚，以追求思想的自由。

    显然，从这种客观性的新定位，我们可以提出另一个相关的问题：在何种条件下这种更为准确而复杂的“客观性”，可以简化为古典意义下的客观性?从观念史图像中的事件来看这一问题，它相当于如下一个问题：什么时候我们可以把与观念史图像中的事件不可分割的观念悬置起来，将历史事件当作不依赖主体的客观事实来处理?我们发现，与此相关的尝试构成了20世纪历史学中最具雄心的研究流派――年鉴学派。

    九、与年鉴学派、后现代史学对话

    从方法论上看，只要那些与历史事件匹配的观念，至今(或任何时候)不曾被忘却或从未消亡过，那么，就可以用同样观念去理解该事件的发生，这类事件可以当作和观念无关的事实加以处理的。

    事实上，历史学家处理的某一大类历史档案，如市场物价波动、商号账目、海关进出口、出入境报表、天灾、突发事件造成人命和破坏记录、交通意外、运动场骚乱等等，他们并不深究记录者是在什么观念支配下将该现象记录下来。这并不等于说，记录者是没有观念支配的(那怕是例行公事、填表格)。社会科学家之所以认为这些事件发生的观念和动机可以忽略不记，是因为支配(记录)这些事件发生的普遍观念在历史上和今天相同或类似。我们可以把这类历史记录当作独立于观念的存在，因而在研究中可以把观念悬置起来。

    早在19世纪，为了在社会学研究中贯彻价值中立和客观性原则，涂尔干(Emile Durkheim，1858―1917年，另译迪尔凯姆)曾对社会行动作过类似的定义。他将其称为“社会事实”(social fact)，所谓“社会事实”必须是可以独立于主体和观念的(或可以从研究者和记录者的观念系统中剥离开来)如同物体那样的存在。[38]众所周知，正是这一类“社会事实”构成社会科学研究对象，亦是鉴别社会科学理论真假的基础。自涂尔干的学生布洛赫(Marc Bloch)开始，对历史上存在过的“社会事实”研究终于在法国史学界全面展开，形成了盛大的年鉴学派。年鉴学派存在两个著名特色，其方法论理据正是我们上面所说的，在处理某类历史记录文文件时，历史学家可以忽略支配这类事件的观念或将其悬置起来。

    年鉴学派的第一个特点是将大量的经济、社会生活史记录为研究分析对象。年鉴学派认为，只有把任何个别事件和记录放到社会环境里加以考察才能理解。这里所谓社会环境，主要指其发生的日常生活背景，特别是把它和当时普遍的社会生活以及自然现象相联系。换言之，年鉴学派把社会事实的核心界定为每个时代的日常生活，并通过处理大量这类历史档案来写历史。

    我们知道，无论几百年前日常生活和今日有多大不同，作为日常生活核心的吃、穿、用，是服从同样的日常生活逻辑；特别它和市场经济相联系时，大多是可以用今日日常生活的逻辑来想象的(当然有时需用人类学田野方法来确认其真实性)。因此，在处理这类文献时，悬置记录者和研究者的观念，并不妨碍对历史作出真实的解释。

    一旦把事件背后的观念悬置，历史研究中发现的结构就与思想变迁无关。它构成年鉴学派的第二个特点。这在布罗代尔(Fernand Braudel)的著作中表现得最为典型。布罗代尔指出在历史展开中的“长时段”、“中时段”、“短时段”，分别与“结构”、“局势”和“事件”相对应。其中，“结构”为长期不变或变化极慢的因素，如地理、生态、社会组织等；“局势”指人口消长、生产增减、工资变化等十年和几十年变化的节奏；而“事件”为革命、地震等突发性事变。在“结构”、“局势”和“事件”三种历史时段中，“事件”转瞬即逝，对历史进程只起微小作用。[39]换言之，所谓历史展开的结构，只能存在于“长时段”(La longue duree)之中，“长时段”大多是市场经济法则和其展开的地理环境和气候的关系得到的统计规律。

    年鉴学派碰到的最大挑战，是不能较好地处理重大事件对长时段模式的影响。

    其实，年鉴学派既然将观念悬置，当然亦不能处理事件改变观念所导致今后事件展开的长期思想背景的不同。正如美国学者帕克(Harold T．Parker)指出的：“年鉴学派在开拓跨时代的宏观历史方面没有取得什么成就”。[40]因为年鉴学派忽略了历史展开中普遍观念与社会互动链，不仅导致年鉴学派在把握历史发展全过程方面显得不够有说服力，而且也使得这一派的研究主要局限于经济史(其前提还是经济形态不变)和社会史。

    1968年，在中国“文革”的影响下发生的法国五月风暴中，年鉴学派第二代领军人物布罗代尔辞去《年鉴》杂志主编，由雅克・勒高夫(Jacques Le coil)和勒瓦・拉杜里(E．Le Roy Ladufie)接任。他们作为年鉴学派第三代核心人物，倾向于把历史事件看成间断性的孤立事件，修正老一代年鉴学派着重于寻找连续性的总体史学。传统政治史和人物史，以及新起的心态史和和历史人类学，日益活跃。在某种意义上讲，第三代年鉴学派研究取向的转变，是力图再次回到“社会事实”中被悬置的普遍观念，及与人物活动密切相关的事件研究中来。从方法论上来看，年鉴学派创始之初把普遍观念从历史分析中排除出去，现在又想将其塞进失去灵魂的历史事件中，令该学派发展陷于自我矛盾。方法基础的瓦解，以致于很多人不再把他们看成年鉴学派，而冠之以“新史学”名号。在方法论自我矛盾中，年鉴学派的影响力式微，而和新史学同步的后现代史学风靡，也就不足为怪了。

    1973年，美国历史哲学家海登・怀特(Hayden White)的《元史学：19世纪欧洲的历史想象》)(Metahistory：The Historical Imagination in Nineteenth-Century Europe)一书出版，标志着后现代史学的登场。因任何史料(包括目击者的记录)都离不开观念和价值系统，过去的记录不可能是客观真实，而只是各种形式的文本，后现代史学出于这种看法，主张研究的第一步是解读作为文本的史料。怀特指出，要把这些文本变成历史，首先就要把它们组合成一部编年史，然后再把这个编年史转化为一种叙事，叙事的过程包括了论证、编织情节和进行解释。[41]

    用1976年法国哲学家罗兰・巴特(Roland Barthes)向世人宣布的“作者之死”的观点来看，不管作者的意图是什么，只有在原作者那里，文本才具有“一义性”；一旦作者死去，任何人在与文本的相遇 fencounter)时，都会以自己的文化背景和观念去解读该文本，创造属于自己的意义。也就是说，作者(或记录者)赋予作品的意义结构(或表达的价值系统)对其他人(史学家或任一个读者)不再成立。

    基于上述认识，后现代史学得到一个结论：以往史学研究中的“宏大叙事”或历史诠释，是毫无意义的。由于历史是过去发生的事情，我们根本无法再了解历史的真实。历史研究充其量所能做到的，如1999年怀特在杜兰大学作题为“作为预期之实现的历史(History as FulfiHment)”的演讲时表述的那样：“历史研究的一个目的当然是重构性的，但是这种重构只能在建构的基础上达成，而这些建构所具有的想象性和诗性的成份绝不亚于理性和科学的成份。”[42]

    既然历史研究的过程和文学创作一样，历史论文和文学作品没有本质不同，即历史和小说(fiction)之间不存在界限。傅柯(Michel Foucoult)甚至刻意避免用“历史”两字，主张用知识的“考古学”(archaeolo- gy)或“系谱学”(genealogy)来取代“历史”。后现代史学虽赋予历史解释以前所未有的丰富性，并把观念史图像中的事件从社会事实的古典客观性笼罩下解放出来，但其结果却是取消了历史研究的意义。

    表面上看，上述推理无懈可击，但它和历史学家的直觉相违背。问题出在哪里呢?根据前面的讨论，我们很容易发现，后现代史学完成了一系列概念偷换，先把观念史图像中的事件中的普遍观念换成了个人持有的独特的观念，进而再把观念转化为个人心灵感受和不可沟通的价值表达。我们已经指出：观念史图像中的事件可以分成两种基类型，个人观念史图像中的事件和普遍观念史图像中的事件。前者只是个体观念(心灵)史的一部分。而后者则为普遍观念演化史中的群体图像。当研究者认为个人比群体更重要，或普遍观念转化为社会行动可以被化约为个人观念转化为行动之和时(请注意，并不是任何情况都可以把社会行动化约为个人行动之和的)，普遍观念史图像中的事件就变成个人观念史图像中的事件。

    但是，对于个人观念史图像中的事件，只要满足拟受控实验原则，它同样亦具有真实性。这样，仍然可以把一个个人的观念与社会事件的互动链综合成普遍观念和社会的互动链，这正如用传记来验证普遍历史的真实性一样。后现代史学之所以可以用它否定历史解释的真实性，关键在于视个人持有的观念为不可沟通的。这实际上是把观念偷换成个人价值造成的误解。后现代史学从文学著作中作者在文本中注入价值的“一义性”出发，认为拟受控实验不能运用。这恰恰是混淆了社会行动之记录和个人情感体验(文学创作)根本的不同。

    金观涛在《系统的哲学》一书中曾明确区别了两种本征态，一种只对个人可重复，它对应着个人的主观真实；另一种是操作系统经验对所有人的可重复性，它才是受控实验证明的真实性。[43]显而易见，社会行动不是主观真实，主观真实只有在审美等个人活动中才存在。后现代史学是把审美活动中的主观真实套用到社会行动中来，才取消了对真实性的追求。正因为社会行动与个人审美等情感活动有本质差别，我们必须把社会行动的记录(如果它亦可称为文本的话)和个人审美活动的文本严格区别开来。罗兰・巴特《作者之死》提出的文本意义对作者的“一义性”，涉及的都是审美过程。对审美过程再严格的记录，都不一定具有公共性的。[44]这正是为什么同一文本对其他阅读者会产生多义性的原因。而对于真实发生过的社会行动，它具有可理解性；即只要揭示支配其观念，研究者就可以在思想上重演该过程，并将其和记录对照以达到真实性之判定。

    任何正常人都会有这样的体验：当普遍观念或意识形态具有生命力时，大多数人并不会怀疑它存在的意义，及其转化为社会行动的真实性。而一旦意识形态解魅，宏大历史叙事招人反感，人们会不由自主地用个人观念史图像中的事件取代普遍观念史图像中的事件。这时，普遍观念与社会的互动链就变成一部部个体的心灵史，特别是那些原先易被普遍观念转化为社会行动过程忽略的个人历史。

    这种现象正如伊格尔斯所指出的那样：“如果一个人希望使那些无名氏免于湮没无闻，就需要一种从概念上和方法论上对历史的新探究，以便不再把历史视为一个统一的过程、一个许多个人都湮没不彰的宏大叙事，而将其视为一个伴随着许多个人中心的多侧面的流动。现在所关注的不是一个历史，而是多个历史，或者多个故事则更好。”[45]这一切本无可非议，但在方法论上讲，并不能由此得到普遍历史为假的结论。

    总之，按我们提出的观念史图像中的事件来看，在处理史料时，年鉴学派和后现代史学正好对应着两种简单化的倾向：前者是把普遍观念当作与事件无关而悬置起来，史料被视为具有古典客观性的“社会事实”；后者则是放弃对价值系统的可理解性要求(将普遍观念还原成个人主观感受和价值体验)，这样，史料的解读变为主观真实，事件不再具有可理解性(真实性)。针对这两种简单化倾向，我们认为，问题的本质仍需回到观念史图像中的事件之研究中来。不再对其作古典客观主义和主观真实之歪曲。

    追求真实一直是历史学的目的，亦是一代又一代历史学家持之有恒的奋斗目标。只是由于对什么是历史真实的理解的差异，20世纪的历史研究中，先是有坚持古典客观主义的年鉴学派，后是用主观真实的唯一性多义性来取消客观性的后现代主义，各领风骚数十年。但近十几年来，后现代史学也后继乏力。今天，或许是超越这两种对立的时候了。历史学家必须尽可能去还原支配历史事件发生的观念，只有通过追求历史的真实性，才能恢复历史研究的意义。我们在这十年研究探索中感到，数据库方法引入历史研究，使得这种探索变得可以用术语演变来验证，从而寻找历史的真实是可能的。

    或许，只有经历了观念决定论和经济决定论的破产，今天的人类才能知晓，历史既是人自由意志的展开，亦是人在追求目的过程中认识到人的能动性如何受到限制。正是两者永恒的张力造成了历史展开过程的不可预见性，使人类的心灵处于不断演进之中。它亦构成了历史研究独特的价值，因为能够认识这种演进以及这种演进对人类自我认同重塑的，唯有历史。它使我们想到康德(Kant Emmanuel)的名言：“有两样东西，人们愈是经常持久地对之凝神思索，它们就愈是使内心充满常新而日增的惊奇和敬畏：我头上的星空和我心中的道德律。”[46]康德的这段话涉及“实然”和“应然”两大领域，不要忘记，唯有历史理论研究才能把这分离的两大领域联系起来。新世纪的历史学家面对人类经历的过去，可以如同康德那样抱着敬畏和好奇，去寻找那条追求历史真理之路。

    注释：

    ①本文是对2006年11月为日本爱知大学国际中国学研究中心《21世纪COE工程最终报告集》提供的论文的基础上大幅修改而成；此间，受到2006年香港研究资助局(RGC)资助的为期两年的研究计划：“A Computer-Aided Quantitative Study of the Interaction between Social Events and the Transformation of Modem Chinese Political Concepts(1830-1924)(CUHK4554／06H)的资助，谨此说明并致谢。此稿经《清史研究》编辑部删节，全文即将在作者的相关论文集刊出。

    ②罗素(Bertrand Russell)著，何兆武等译：《论历史》(北京：三联书店，1991)，页2。

    ③金观涛：<奇异悖论――证伪主义可以被证伪吗?>，《自然辩证法通讯》，1989年第2期(北京：中国科学院自然辨证法通讯，1989)。

    ④金观涛《系统的哲学》，页105―109。

    ⑤柯林武德(R．G．Collingwood)著，何兆武、张文杰译《历史的观念》(北京：商务印书馆，1997)，页174。

    ⑥顾颉刚《汉代学术史略》(上海：东方书社，1941)，页37―38。

    ⑦柯林武德(R．G．Collingweod)：(历史哲学的性质和目的)《现代西方历史哲学译文集》，页158。

    ⑧金观涛《系统的哲学》，页80―84。

    ⑨这里，c和Y可以是概率相关的。

    ⑩Carl G．Hempel：“The Function of General Law in History Journal of Philosophy．”(1942)，Reprint in Theories of History．

    ⑾严格地地，第二种情况应表达为：在C条件下，行动者根据观念X，实现该观念之过程L(1)导致事件Y发生。C是外部条件，通常是不可控的变量。

    ⑿下面我们谈到互为因果过程时，着重的是因果关系中结果反过来作为原因。因该关系对达到目的达程和历史解释中独特的“因果性”耦合中亦成立，我们不再对L(1)和L(2)作严格区分。

    ⒀请注意，社会对历史之整体性反思如何改变普遍观念，亦属于L(2)。这里，导致观念改变的不是一具体事件，而是某一时段发生的所有事件。

    ⒁“中国近现代思想史专业数据库”(1820―1930)是在香港特区政府香港研究资助局(RGC)以及其它研究计划资助下，由香港中文大学当代中国文化研究中心研究开发，刘青峰任主编需要目录者可向qingfeng@euhk．edu索取。

    ⒂找关键词时特别需要注意，由于语言变迁，不能用我们今天的关键词来代替历史上对应该观念和事件的词汇，而要从历史文献中找当时的用法。例如，今天的历史教科书中把1894～1895年的中日战争称为“甲午战争”，但当时很少有这个用法，而是“中日战争”、“黄海大战”等等。

    ⒃周善培《辛亥四川争路亲历记》(重庆：重庆人民出版社，1957)，页10。

    ⒄张朋园《立宪派与辛亥革命》(台北：“中央研究院”近代史研究所，1969)。

    ⒅李炳南《辛亥革命起因之分析》(台北：正中书局，1987)，页144，表4―1。

    ⒆梁启超：(罪言)，《饮冰室文集之二十九》(上海：中华书局，1936)，页89。

    ⒇我们可以用数据库统计1903年后“忠君”一词使用频度，发现“忠君”并不常用，很多时候是在批判意义下使用的。更重要的是，自1906年后，“忠君”一词使用频度一直处于不断减少之中，如1906年尚有22次，1907年为15次，1908年为9次，1909年是5次，1910年只有3次，1911年为2次。当然，数据所收文献不够全面、量不够大，会影响到统计结果。

    [21]林明德《袁世凯与朝鲜》中央研究院近代史研究所专刊(26)(台北：1970，1984再版)，页346―350。

    [22]林明德《袁世凯与朝鲜》，页366―368。

    [23]郭廷以《近代中国史纲》上册(香港：中文大学出版社，1989)，页182―187。

    [24]张佩纶《涧于集书牍》卷六，页10。转引自林明德《袁世凯与朝鲜》“中央研究院”近代史研究所专刊(26)(台北：1970，1984再版)，页394。

    [25]野村浩一《近代日本的中国认识》(北京：中央编译出版社，1999)，页48。

    [26]野村浩一《近代日本的中国认识》，页110。

    [27]信夫清三郎《日本近代政治史》第三卷，(上海：上海译文出版社，1988)，页158。

    [28]信夫清三郎《日本近代政治史》第二卷，页400-401。

    [29]盛邦和：<19世纪与20世纪之交的日本亚洲主义>《历史研究》2000年，第3期，页128。

    [30]信夫清三郎《日本近代政治史》第三卷，页122―123。

    [31]郑容和：<从周边视角来看朝贡关系――朝鲜王朝对朝贡体系的认识和利用>《国际政治研究》第一期(北京大学，2006年)，页83―84。

    [32]林明德《袁世凯与朝鲜》，页13。

    [33]林明德《袁世凯与朝鲜》，页384―385。

    [34]郑容和：<从周边视角来看朝贡关系――朝鲜王朝对朝贡体系的认识和利用>，页87。

    [35]陆奥宗光《蹇蹇录》(北京：商务印书馆，1963)，页132。

    [36]张灏：<中国近代思想史的转型时代>，《二十一世纪》总52期(香港：香港中文大学中国文化研究所，1999年4月)，页29―39。

    [37]就以历史记忆为例，既然真实的历史记忆是由所有参与者(和观察者)普遍观念和社会行动互动链构成，我们就可以理解为甚么每过一段时间往往发生对历史记忆的重构了。不要忘记，人总是生活在某种普遍观念和价值系统中的，今日人们信奉的观念系统只是历史上形成观念和社会行动互动链之一环，这种互动无疑会不断持续下去而不会终结。

    由于我们对甚么是重要历史事件以及它们之间关系的看法，都和我们今天所信奉的普遍观念和价值系统存在着不可割断的联系，故当代人往往会根据今日价值系统重整历史事件和重构历史记忆。这不仅是因为新史料和新解释的出现，还是出于人们信奉价值系统的变化，判断哪些事应归为重大历史事件也取决于不同时期人们的价值系统。这也是为甚么每过一段时间，就要重新重编写历史教科书。

    这一切本无可非议，历史记忆作为人类知识和良知的一部分，总是随着普遍观念的演化而改变的。但是，我们必须意识到，从新的价值系统出发重新思考过去的观念和社会的互动链，目的是为了使得历史记忆向更为真实方面迈进，而不是用今日之观念去取代过去盛行之观念。

    这里，建立真实的历史记忆有两重含义：第一，恢复历史上发生过事件背后真实观念和价值系统，第二，过去的观念和价值系统必须是在今日价值系统审视之下的。事实上，只有做到这两点，人类才能清醒地意识到我们生活在哪一种价值系统之中，才能发现过去和今日的局限。

    在历史记忆中，今日成为过去的镜子，而真实的过去又成为今日的镜子。这种价值系统真实性的互映只有通过真实历史记忆探索才能得到。在这意义上，支配历史上重大事件背后真实观念每一次恢复，同时亦都是某种进步，因为在今日观念之反思之下，总有过去被隐蔽的方面开始显现出来。另一方面，正是疏理普遍观念和社会互动链以理解当代普遍观念如何形成，才可以有效地帮助我们认识当代价值系统存在的盲点。

    [38]E．迪尔凯姆(EmileDurkheim，1858―1917)着，狄玉明译《社会学方法的准则》(北京：商务印馆，1995)，页23―35。

    [39]费．布罗代尔Eemand Braudel)：(史学与社会科学)《经济、社会、文明年鉴》1958年10―12号。

    [40]伊格尔斯(Georg G．Iggers)、帕克(Harold T．Parker)主编，陈海宏等译《历史研究国际手册――当代史学研究和理论》，华夏出版社，1989年，页540。

    [41]赵世瑜：<传说・历史・历史记忆―从20世纪的新史学到后现代>《新史学》下(北京：中国人民大学出版社，2003)，页650。

    [42]林同奇：<与怀特谈他的后现代史学>，《二十一世纪》总九十期(香港：中文大学中国文化研究所，2005．8)，页115―124。

    [43]金观涛《系统的哲学》，页70―73。

    [44]《系统的哲学》曾有一重要推论：并不是所有主观真实都具有公共性，可以成为其它人主观真实的。这时对其他人，某人的主观真实和虚构没有明确界线(金观涛《系统的哲学》，页61―73)。

    [45]Georg．G．Iggers，Historiography in Twentieth Century： From Scientific Objectivity to the Postmodem Challenge(Hanover， NH：Wesleyan University Press，1997)，PP．103．

    [46]康德(Immanuel Kant)著，邓晓芒译《实践理性批判》(台北：联经，2004)，页195。'''
    topk = defaulttopk
    tags = jieba.analyse.extract_tags(sample_text,topK=topk)
    tagsString = ""
    from nltk.probability import FreqDist
    fd = FreqDist(tags)
    counts = []
    charencoding = chardet.detect(sample_text)
    for keyword in tags:
        if charencoding['encoding'] != 'utf-8':
            keywordtext = keyword.encode(charencoding['encoding'])
        else:
            keywordtext = keyword.encode("utf-8")
        count = sample_text.count(keywordtext)
        fd[keyword] = count
        counts.append(str(count))
    keywords = []
    for key,val in fd.iteritems():
        keyword = domain.Keyword(id=0, name=key, count=val, textId=0)
        keywords.append(keyword)
    imgUrl = createKeywordImageUrl(keywords)
    return template("extract_form",content=sample_text,tags=keywords,topk=defaulttopk,keyImgUrl=imgUrl, texts=sqlitedb.getTexts(), selectedFile="")

import os
from datetime import *
import tempfile
os.environ['MPLCONFIGDIR'] = tempfile.mkdtemp()
import matplotlib
matplotlib.use('Agg')


def createKeywordImageUrl(keywords):
    imgUrl = u"/image/" + u"test" + u"&" + str(len(keywords)) + u"&" + u" ".join(
        [keyword.name for keyword in keywords]) + u"&" + u" ".join(str(keyword.count) for keyword in keywords)
    return imgUrl


@get('/:id')
def extractFile_action(id):
    if(id == 'favicon.ico'):
        return ''
    textObject = sqlitedb.getText(id)
    if textObject is not None:
        text = textObject.content
    else:
        return None
    charencoding = chardet.detect(text)
    topk = defaulttopk
    keywords = sqlitedb.getKeywords(id, topk)
    if(keywords is not None and len(keywords) > 0):
        imgUrl = createKeywordImageUrl(keywords)
    else:
        tags = jieba.analyse.extract_tags(text,topK=topk)
        tagsString = ""
        from nltk.probability import FreqDist
        fd = FreqDist(tags)
        counts = []
        for keyword in tags:
            if charencoding['encoding'] != 'utf-8':
                keywordtext = keyword.encode(charencoding['encoding'])
            else:
                keywordtext = keyword.encode("utf-8")
            count = text.count(keywordtext)
            fd[keyword] = count
            counts.append(str(count))
        keywords = []
        for key,val in fd.iteritems():
            keyword = domain.Keyword(id=0, name=key, count=val, textId=0)
            keywords.append(keyword)
        imgUrl = createKeywordImageUrl(keywords)
    if charencoding['encoding'] != 'utf-8':
        text = unicode(text, charencoding['encoding'], errors="ignore")
    return template("extract_form",content=text,tags=keywords,topk=topk,keyImgUrl=imgUrl, texts=sqlitedb.getTexts(), selectedFile=id)

@post('/')
@post('/extract')
def extractSubmit_action():
    id = request.forms.selectedFile
    if "extract" in request.forms:
        text = request.forms.text
        topk = int(request.forms.topk)
        defaulttopk = topk
        tags = jieba.analyse.extract_tags(text,topK=topk)
        from nltk.probability import FreqDist
        fd = FreqDist(tags)

        for keyword in tags:
            #keyword = keyword.encode("utf-8")
            count = text.count(keyword)
            fd[keyword] = count
        keywords = []
        for key,val in fd.iteritems():
            keyword = domain.Keyword(id=0, name=key, count=val, textId=0)
            keywords.append(keyword)
        imgUrl = u"/image/" + u"test" + u"&" + str(len(fd)) + u"&" + u" ".join(fd.keys()) + u"&" + u" ".join(str(v) for v in fd.values())
    elif "upload" in request.forms:
        #try: # Windows needs stdio set for binary mode.
            #import msvcrt
            #msvcrt.setmode (0, os.O_BINARY) # stdin  = 0
            #msvcrt.setmode (1, os.O_BINARY) # stdout = 1
        #except ImportError:
            #pass
        # A nested FieldStorage instance holds the file
        fileitem = request.files.file
        # Test if the file was uploaded
	if fileitem.filename:

            # strip leading path from file name to avoid directory traversal attacks
            fn = fileitem.filename
	    filename = fn.split('.')[0]
            text =fileitem.file.read()
            #path = os.path.dirname(os.path.abspath(__file__))
            open('files/' + fn, 'wb').write(text)
            name = filename
            author = ""
            period = ""
            uploader = ""
            charencoding = chardet.detect(text)
            text = unicode(text, charencoding['encoding'], errors="ignore")
            textObject = domain.Text('',name,author,period,fn,uploader,'',text)
            id = sqlitedb.addText(textObject)
            topk = int(request.forms.topk)
            defaulttopk = topk
            tags = jieba.analyse.extract_tags(text,topK=-1)
            from nltk.probability import FreqDist
            fd = FreqDist(tags)
            for keyword in tags:
                #keyword = keyword.encode("utf-8")
                count = text.count(keyword)
                fd[keyword] = count
            keywords = []
            for key,val in fd.iteritems():
                keyword = domain.Keyword(0, name=key, count=val, textId=id)
                keywords.append(keyword)
            sqlitedb.addKeywords(keywords)
            keywordtopk = keywords[:topk]
            imgUrl = createKeywordImageUrl(keywordtopk)

    return template("extract_form",content=text,tags=keywords[:topk],topk=topk,keyImgUrl=imgUrl, texts=sqlitedb.getTexts(), selectedFile=id)

@get('/managefile')
def managefile():
    return template("managefile_form", texts=sqlitedb.getTexts())

@post('/managefile')
def managefile():
    if "upload" in request.forms:
        #try: # Windows needs stdio set for binary mode.
            #import msvcrt
            #msvcrt.setmode (0, os.O_BINARY) # stdin  = 0
            #msvcrt.setmode (1, os.O_BINARY) # stdout = 1
        #except ImportError:
            #pass
        # A nested FieldStorage instance holds the file
        fileitem = request.files.file
        # Test if the file was uploaded
        if fileitem.filename:

            # strip leading path from file name to avoid directory traversal attacks
            fn = fileitem.filename
            filename = fn.split('.')[0]
            text =fileitem.file.read()
            #path = os.path.dirname(os.path.abspath(__file__))
            open('files/' + fn, 'wb').write(text)
            name = filename
            selectedFileName = fn
            author = ""
            period = ""
            uploader = ""
            charencoding = chardet.detect(text)
            text = unicode(text, charencoding['encoding'], errors="ignore")
            textObject = domain.Text('',name,author,period,fn,uploader,'',text)
            sqlitedb.addText(textObject)
    else:
        checkedtexts = request.forms.dict['checkedtext']
        print checkedtexts
        sqlitedb.deleteTexts(checkedtexts)
    return template("managefile_form", texts=sqlitedb.getTexts())

@get('/cut')
def main():
    sample_sentences='''
我不喜欢日本和服。
雷猴回归人间。
工信处女干事每月经过下属科室都要亲口交代24口交换机等技术性器件的安装工作。
我需要廉租房。
永和服装饰品有限公司。
我爱北京天安门。
abc
隐马尔可夫
雷猴是个好网站
“Microsoft”一词由“MICROcomputer（微型计算机）”和“SOFTware（软件）”两部分组成
草泥马和欺实马是今年的流行词汇
伊藤洋华堂总府店
中国科学院计算技术研究所
罗密欧与朱丽叶
我购买了道具和服装
PS: 我觉得开源有一个好处，就是能够敦促自己不断改进，避免敞帚自珍
湖北省石首市
湖北省十堰市
总经理完成了这件事情
这是一个伸手不见五指的黑夜。我叫孙悟空，我爱北京，我爱Python和C++。
电脑修好了
做好了这件事情就一了百了了
人们审美的观点是不同的。
我们买了一个美的空调
线程初始化时我们要注意
一个分子是由好多原子组织成的
祝你马到功成
他掉进了无底洞里
中国的首都是北京
孙君意
外交部发言人马朝旭
领导人会议和第四届东亚峰会
在过去的这五年
还需要很长的路要走
60周年首都阅兵
你好人们审美的观点是不同的
买水果然后来世博园
买水果然后去世博园
张晓梅去人民医院做了个B超然后去买了件T恤
AT&T是一件不错的公司，给你发offer了吗？
C++和c#是什么关系？11+122=133，是吗？
'''
    return template("cut_form",content=sample_sentences,selected=functools.partial(match,1))

@post('/cut')
def cut_action():
    from jieba import posseg
    text = request.forms.text
    if request.forms.opt=="1":
      result = "/ ".join(jieba.cut(text))
    elif request.forms.opt=="2":
      result = "/ ".join(jieba.cut_for_search(text))
    elif request.forms.opt=="3":
      result = []
      for w in posseg.cut(text):
        result.append(w.word+"/"+w.flag)
      result = " ".join(result)
    else:
      result = ""
    return template("cut_form",content=result,selected=functools.partial(match,int(request.forms.opt)))

@get('/design/sequence')
def desgin_sequence():
    return template("design_sequence_form")

if __name__ == "__main__":
    # Interactive mode
    #debug(True)
    #run(server='CherryPy',host='localhost', port=8080, debug=True)
    run(host='localhost', port=8083, reloader=True)
    #from cherrypy import wsgiserver
    #from bottle import CherryPyServer
    #run(host='localhost', port=8099, server=CherryPyServer)
    #from wsgiref.simple_server import make_server
    #httpd = make_server('localhost', 8090, default_app())
    # Wait for a single request, serve it and quit.
    #httpd.serve_forever()

else:
    # Mod WSGI launch
    os.chdir(os.path.dirname(__file__))
    application = default_app()
